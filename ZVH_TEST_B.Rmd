---
title: "ZVH Zápoètový TEST - Varianta `r params$varianta`"
# subtitle: "Varianta `r params$varianta`"
author: "Jméno a pøíjmení:"
header-includes: 
- \usepackage{fancyhdr}
- \pagestyle{fancy}
- \fancyhf{}
- \chead{Jméno a pøíjmení:}
- \lhead{Varianta `r params$varianta`}
- \usepackage{float}
- \usepackage{graphics}
- \usepackage{graphicx}
- \usepackage{placeins}
- \usepackage{amsmath}
date: "`r format(Sys.time(), '%d %B %Y')`"
output: pdf_document
params:
  n: 1
  d: !r Sys.Date()
  varianta: B
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(OutDec = ",")
```

## Slepá mapa (10 bodù)
```{r, echo = FALSE}
vsechny_reky <- c("Kamenice",
          "Smìdá",
          "Lužická Nisa",
          "Plouènice",
          "Kamenice",
          "Labe",
          "Bílina", 
          "Chomutovka", 
          "Ohøe",
          "Liboc",
          "Úpa", 
          "Metuje", 
          "Jizera", 
          "Mrlina", 
          "Cidlina", 
          "Bystøice",
          "Orlice",
          "Tichá Orlice",
          "Teplá",
          "Støela",
          "Rakovnický potok",
          "Lodìnice",
          "Litavka", 
          "Berounka",
          "Vltava",
          "Mže",
          "Rokytka",
          "Výrovka", 
          "Želivka", 
          "Radbùza",
          "Úhlava",
          "Úslava",
          "Lomnice",
          "Otava", 
          "Køemelná",
          "Volyòka",
          "Blanice",
          "Doubrava",
          "Doubrava",
          "Louèná",
          "Chrudimka",
          "Moravská Sázava",
          "Tøebùvka",
          "Morava",
          "Sázava",
          "Malše",
          "Lužnice",
          "Nežárka",
          "Moravská Dyje",
          "Rokytná",
          "Jihlava",
          "Oslava",
          "Dyje",
          "Svratka",
          "Svratka",
          "Svitava",
          "Osoblaha",
          "Bìlá",
          "Opava",
          "Moravice",
          "Odra",
          "Olše",
          "Haná",
          "Beèva",
          "Ostravice",
          "Rožnovská Beèva",
          "Vsetínská Beèva",
          "Olšava",
          "Vlára", 
          "Morava")
vsechny_nadrze <- c("Jirkov", 
                    "Fláje",
                    "Josefùv Dùl",
                    "Labská",
                    "Rozkoš",
                    "Nechranice",
                    "Máchovo jezero",
                    "Žlutice",
                    "Hracholusky",
                    "Nýrsko",
                    "Vrané",
                    "Štìchovice",
                    "Slapy",
                    "Kamýk",
                    "Orlík",
                    "Koøensko",
                    "Hnìvkovice",
                    "Lipno I.",
                    "Lipno II.",
                    "Bezdrev",
                    "Øímov",
                    "Svìt",
                    "Rožmberk",
                    "Staòkovský rybník/rybník Hejtman",
                    "Želivka - Švihov",
                    "Pastviny",
                    "Slezská Harta",
                    "Kružberk",
                    "Šance",
                    "Seè",
                    "Vír",
                    "Brnìnská pøehrada",
                    "Vranov",
                    "Nové Mlýny")
vybrane_reky <- sample(vsechny_reky, 10)
vybrane_nadrze <- sample(vsechny_nadrze, 5)
```


Zaneste do slepé mapy následující øeky: \par 
*`r vybrane_reky`.*
\par 
Dále v mapì vyznaète tyto nádrže: \par 
*`r vybrane_nadrze`*
\begin{figure}[h!]
  \makebox[\textwidth]{\includegraphics[width = \paperwidth]{slepa_mapa_cb.pdf}}
\end{figure}
\FloatBarrier

## Pøíklad 1 (7 bodù)
```{r echo = FALSE}
PR1 <- list()
PR1$A <- round(runif(1, 4, 14), 0)
PR1$Hs <- round(runif(1, 400, 900), 0)
PR1$Qa <- round(runif(1, 40, 90), 0)
```

Výpoèítejte odtokový souèinitel $\varphi$ v povodí o velikosti $A$ = `r PR1$A` km$^{2}$, kde roèní úhrn srážek je $H_S$ = `r PR1$Hs` mm
a prùmìrný roèní prùtok v uzávìrovém profilu povodí je $Q_a$ = `r PR1$Qa` l$\cdot$ s$^{-1}$
\vskip5cm

## Pøíklad 2 (7 bodù)
```{r, echo = FALSE}
PR2 <- list()
PR2$A <- round(runif(1, 4, 25), 0)
PR2$Hs <- round(runif(1, 400, 1400), 0)
PR2$phi <- round(runif(1, 0, 1), 2)
```

<!-- `r if(params$varianta == "A"){"##Pøíklad 2 \nVypoèítejte mìsíèní bilanci \n\n$ $\n"}` -->
Vypoètìte odtok (l$\cdot$s$^{-1}$) z území o rozloze $A$ = `r PR2$A` km$^2$, kterému náleží roèní úhrn srážek $Hs$ = `r PR2$Hs` mm a odtokový souèintel $\varphi$ = `r PR2$phi`.
\vskip5cm

## Pøíklad 3 (10 bodù)
```{r, echo = FALSE}
# Generování zadání rovnice kontinuity
PR3 <- list()
PR3$Q1 <- round(runif(1, min = 0.1, max = 10), 2) # prùmìr v cm2
PR3$v1 <- round(runif(1, min = 0.5, max = 4), 2)
PR3$D1 <- round(runif(1, min = 0.5, max = 4), 2)

PR3$Q2 <- round(runif(1, min = 0.1, max = 10), 2) # prùmìr v cm2
PR3$v2 <- round(runif(1, min = 0.5, max = 4), 2)
PR3$D2 <- round(runif(1, min = 0.5, max = 4), 2)

PR3$Q3 <- round(runif(1, min = 0.1, max = 10), 2) # prùmìr v cm2
PR3$v3 <- round(runif(1, min = 0.5, max = 4), 2)
PR3$D3 <- round(runif(1, min = 0.5, max = 4), 2)

PR3$Q4 <- round(runif(1, min = 0.1, max = 10), 2) # prùmìr v cm2
PR3$v4 <- round(runif(1, min = 0.5, max = 4), 2)
PR3$D4 <- round(runif(1, min = 0.5, max = 4), 2)
```

Potrubím protéká voda. Dopoèítejte hodnoty ve ètyøech mìøících profilech. Uvažujte ideální kapalinu a kruhový pøùøez potrubí. Užijte znalosti, že Q$_1$ = Q$_2$.  


\begin{table}[h!]
\centering
\begin{tabular}{|l|c|c|c|c|}
\hline
Profil                 & 1          & 2          & 3          & 4            \\ \hline
v (m$\cdot$ s $^{-1}$) & `r PR3$v1` &            & `r PR3$v3` &              \\ \hline
Q (l$\cdot$ s $^{-1}$) &            &            & 2Q$_{2}$   & Q$_2$/4      \\ \hline
D (cm)                 & `r PR3$D1` & `r PR3$D2` &            &              \\ \hline
S (cm$^{2}$)           &            &            &            & 1/3 S$_3$    \\ \hline
\end{tabular}
\end{table}


\vskip10cm    

## Pøíklad 4 (6 bodù)
```{r, echo = FALSE}
PR4 <- list()
PR4$Q1 <- round(runif(1, 40, 90), 0)
PR4$c1 <- round(runif(1, 0.001, 0.010), 3)
PR4$Q2 <- round(runif(1, 1, 9), 0)
PR4$c2 <- round(runif(1, 0.010, 0.050), 3)
```

V pozorovaném místì byl v øece namìøen prùtok $Q_1$ = `r PR4$Q1` l$\cdot$ s$^{-1}$ a zjištìna koncentrace kontaminaèní látky $c_1=$ `r PR4$c1`  mg$\cdot$ l$^{-1}$. Dále po toku do nìj vstupuje výpust $Q_2$ = `r PR4$Q2` l$\cdot$ s$^{-1}$ s koncentrací $c_2=$ `r PR4$c2` mg$\cdot$ l$^{-1}$. Vypoèítejte celkovou koncetraci látky za soutokem.
\vskip5cm

## Pøíklad 5 (10 bodù)

```{r, echo = FALSE}
PR5 <- list()
PR5$h <- round(runif(1, 1, 2), 1)
PR5$n <- round(runif(1, 0.02, 0.05), 2)
PR5$b <- round(runif(1,0.5,1.5),1)
```

Vypoèítejte prùtok v otevøeném pravidelném lichobìžníkovém korytì ve výšce $h$ = `r PR5$h` m. Využijte Chézyho rovnice.    
Vzorce pro geometrii koryta:   
\begin{align}
O &= b + 2\sqrt{(hm)^2 + h^2}\\   
S &= h(b + hm)
\end{align}

Dále je dán 2\% podélný sklon koryta, drsnost obou bøehù $n$ = `r PR5$n`, šíøka dna $b$ = `r PR5$b` m a sklon svahu $m$ = 1,5.


\newpage
## Výsledky
#### Pøíklad 1
```{r, echo = FALSE}
PR1_res <- list()
PR1_res$phi <- (PR1$Qa * 1e-03 * 60 * 60 * 24 * 365) / (PR1$A * 1e+06 * PR1$Hs * 1e-03) 
```
Odtokový souèinitel je $\varphi$ = `r round(PR1_res$phi, 2)`.

#### Pøíklad 2   
```{r, echo = FALSE}
PR2_res <- list()
PR2_res$Qout <- (PR2$Hs / 1000 * PR2$A * 1000000 * PR2$phi) / (60 * 60 * 24 * 365) * 1000 
```
Odtok z povodí je $Q$ = `r round(PR2_res$Qout, 2)` l$\cdot$s$^{-1}$

#### Pøíklad 3
```{r, echo = FALSE}
PR3_res <- list()
PR3_res$S1 <- (pi * PR3$D1^2)/4
PR3_res$Q1 <- PR3$v1 * PR3_res$S1 / 10000 * 1000
PR3_res$Q2 <- PR3_res$Q1
PR3_res$S2 <- (pi * PR3$D2^2)/4
PR3_res$v2 <- ((PR3_res$Q2 / 1000) / (PR3_res$S2 / 10000))
PR3_res$S3 <- ((PR3_res$Q2 / 1000 * 2) / PR3$v3 * 10000)
PR3_res$D3 <- sqrt((4 * PR3_res$S3) / pi)
PR3_res$Q4 <- PR3_res$Q2 / 4
PR3_res$S4 <- PR3_res$S3 / 3
PR3_res$v4 <- ((PR3_res$Q4 / 1000) / (PR3_res$S4 / 10000))
PR3_res$D4 <- sqrt((4 * PR3_res$S4) / pi)

PR3_res$S1_ <- round(PR3_res$S1, 2)
PR3_res$Q1_ <- round(PR3_res$Q1, 2)
PR3_res$Q2_ <- round(PR3_res$Q2, 2)
PR3_res$S2_ <- round(PR3_res$S2, 2)
PR3_res$v2_ <- round(PR3_res$v2, 2)
PR3_res$S3_ <- round(PR3_res$S3, 2)
PR3_res$D3_ <- round(PR3_res$D3, 2)
PR3_res$Q4_ <- round(PR3_res$Q4, 2)
PR3_res$S4_ <- round(PR3_res$S4, 2)
PR3_res$v4_ <- round(PR3_res$v4, 2)
PR3_res$D4_ <- round(PR3_res$D4, 2)
```


\begin{table}[h!]
\centering
\begin{tabular}{|l|c|c|c|c|}
\hline
Profil                 & 1              & 2               & 3               & 4               \\ \hline
v (m$\cdot$ s $^{-1}$) & `r PR3$v1`     & \textbf{`r PR3_res$v2_`}  & `r PR3$v3`      & \textbf{`r PR3_res$v4_`}  \\ \hline
Q (l$\cdot$ s $^{-1}$) & \textbf{`r PR3_res$Q1_`} & \textbf{`r PR3_res$Q2_`}  & 2Q$_{2}$        & Q$_2$/4         \\ \hline
D (cm)                 & `r PR3$D1`     & `r PR3$D2`      & \textbf{`r PR3_res$D3_`}  & \textbf{`r PR3_res$D4_`}  \\ \hline
S (cm$^{2}$)           & \textbf{`r PR3_res$S1_`} & \textbf{`r PR3_res$S2_`}  & \textbf{`r PR3_res$S3_`}  & 1/3 S$_3$  \\ \hline
\end{tabular}
\end{table}


#### Pøíklad 4  
```{r, echo = FALSE}
PR4_res <- list()
PR4_res$cv <- ((PR4$Q1 * PR4$c1) + (PR4$Q2 * PR4$c2)) / (PR4$Q1 + PR4$Q2)
```
Koncentrace po soutoku je rovna $c$ = `r round(PR4_res$cv, 5)` mg$\cdot$ l$^{-1}$. 

#### Pøíklad 5
```{r, echo = FALSE}
PR5_res <- list()
PR5_res$O <- PR5$b + 2 * PR5$h * sqrt(1.5 * 1.5 + 1)
PR5_res$S <- PR5$h * (PR5$b + 1.5 * PR5$h)
PR5_res$R <- PR5_res$S / PR5_res$O
PR5_res$C <- (1 / PR5$n) * (PR5_res$R)^(1 / 6)
PR5_res$v <- PR5_res$C * sqrt(PR5_res$R * 0.02)
PR5_res$Q <- PR5_res$S * PR5_res$v
```

\begin{table}[h!]
\centering
\begin{tabular}{|l|c|}
\hline
Jednotka                & Výsledek            \\ \hline
O (m)                   & `r round(PR5_res$O, 3)`       \\ \hline
S (m$^{2}$)             & `r round(PR5_res$S, 3)`       \\ \hline
R (-)                   & `r round(PR5_res$R, 3)`       \\ \hline
C (m$^{0.5}.$s$^{-1}$)  & `r round(PR5_res$C, 3)`       \\ \hline
v (m$\cdot$ s $^{-1}$)  & `r round(PR5_res$v, 3)`        \\ \hline
Q (m$^{3}$.s $^{-1}$)   & `r round(PR5_res$Q, 3)`       \\ \hline
\end{tabular}
\end{table}
